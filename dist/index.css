/*  ============================================
    Animated Underlines - Tailwind v4 Plugin
    ============================================
    Created by: ArtusLama (ArtusDev / Arthur)
    Copyright Â© 2025 ArtusLama
    License: MIT
    ============================================ */

/* Theme tokens - can be customized with own variants */
@theme inline {
    /* Thickness variants */
    --underline-thickness-thin: 1px;
    --underline-thickness-normal: 2px;
    --underline-thickness-thick: 4px;

    /* Duration variants */
    --underline-duration-fast: 150ms;
    --underline-duration-normal: 250ms;
    --underline-duration-slow: 500ms;

    /* Timing function presets */
    --underline-timing-linear: linear;
    --underline-timing-ease: ease;
    --underline-timing-ease-in: ease-in;
    --underline-timing-ease-out: ease-out;
    --underline-timing-ease-in-out: ease-in-out;
    --underline-timing-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --underline-timing-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Base utility - sets up container, CSS variables, and initial collapsed state */
@utility underline-base {
    display: inline-block;
    position: relative;

    --underline-thickness: var(--underline-thickness-normal);
    --underline-offset: 0px;
    --underline-duration: var(--underline-duration-normal);
    --underline-timing: var(--underline-timing-ease-in-out);
    --underline-origin-in: left;
    --underline-origin-out: left;
    --underline-color: currentcolor;

    @variant after {
        position: absolute;
        content: "";
        height: var(--underline-thickness);
        bottom: calc(var(--underline-offset) * -1);
        left: 0;
        right: 0;
        background-color: var(--underline-color);
        transform: scaleX(0);
        transform-origin: var(--underline-origin-out);
        transition: transform var(--underline-duration) var(--underline-timing);
    }
}

/* Expanded state - underline visible */
@utility underline-expanded {
    @variant after {
        transform: scaleX(1);
        transform-origin: var(--underline-origin-in);
    }
}

/* Direction utilities - simple (same for both in/out) */
@utility underline-left {
    --underline-origin-in: left;
    --underline-origin-out: left;
}

@utility underline-right {
    --underline-origin-in: right;
    --underline-origin-out: right;
}

@utility underline-center {
    --underline-origin-in: center;
    --underline-origin-out: center;
}

/* Independent direction control for in/out animations */
@utility underline-in-left {
    --underline-origin-in: left;
}

@utility underline-in-right {
    --underline-origin-in: right;
}

@utility underline-in-center {
    --underline-origin-in: center;
}

@utility underline-out-left {
    --underline-origin-out: left;
}

@utility underline-out-right {
    --underline-origin-out: right;
}

@utility underline-out-center {
    --underline-origin-out: center;
}

/* Thickness utilities */
@utility underline-thickness-* {
    --underline-thickness: calc(--value(integer) * 1px);
    --underline-thickness: --value(--underline-thickness-*, [length]);
}

/* Offset utilities - positive values move underline down, negative values move it up */
@utility underline-offset-* {
    --underline-offset: calc(--value(integer) * 1px);
    --underline-offset: --value([length]);
}

@utility -underline-offset-* {
    --underline-offset: calc(--value(integer) * -1px);
    --underline-offset: calc(--value([length]) * -1);
}

/* Duration utilities */
@utility underline-duration-* {
    --underline-duration: calc(--value(integer) * 1ms);
    --underline-duration: --value(--underline-duration-*, [*]);
}

/* Timing utilities */
@utility underline-timing-* {
    --underline-timing: --value(--underline-timing-*, [*]);
}

/* Color utilities */
@utility underline-color-* {
    --underline-color: --value(--color-*, [color]);
}
